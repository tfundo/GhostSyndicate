<!DOCTYPE html>
<html lang="es">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <title>TFUNDO // GHOST SYNDICATE TERMINAL</title>
    <style>
        /* Tus estilos de mármol, animaciones y scrollbar siguen aquí */
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #a8a29e; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .gold-gradient { background: linear-gradient(90deg, #bf953f, #fcf6ba, #b38728, #fcf6ba, #aa771c); }
        .gold-text { background: linear-gradient(90deg, #bf953f, #fcf6ba, #b38728, #fcf6ba, #aa771c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>

<body class="bg-black text-stone-400 selection:bg-[#bf953f] selection:text-black">

    <div class="max-w-7xl mx-auto p-4 md:p-12 relative z-20">
        
        <header class="flex flex-col md:flex-row justify-between items-end border-b border-stone-800 pb-8 mb-12 gap-4">
            <div>
                <h1 class="text-6xl md:text-8xl font-orbitron font-bold text-white tracking-tighter uppercase glitch-effect" data-text="TFUNDO">TFUNDO</h1>
                <p class="gold-text text-sm md:text-lg tracking-[0.3em] uppercase mt-2">/// Ghost Syndicate Gaming /// Database Uplink</p>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            
            <div class="lg:col-span-4">
                <div class="bg-black/40 border border-stone-800 p-8 backdrop-blur-md relative overflow-hidden group">
                    <h2 class="text-xl font-orbitron text-white mb-8 uppercase tracking-widest border-l-2 border-[#bf953f] pl-4">Nuevo Recluta</h2>

                    <form id="registroForm" class="space-y-6">
                        <div>
                            <label class="block text-[10px] uppercase tracking-[0.2em] text-stone-500 mb-2">Gamertag</label>
                            <input type="text" name="discord" required class="w-full bg-stone-900/40 border border-stone-800 p-3 text-white focus:outline-none focus:border-[#bf953f] transition-all uppercase placeholder-stone-800">
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase tracking-[0.2em] text-stone-500 mb-2">Handle / Alias</label>
                            <input type="text" name="handle" required class="w-full bg-stone-900/40 border border-stone-800 p-3 text-white focus:outline-none focus:border-[#bf953f] transition-all placeholder-stone-800">
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase tracking-[0.2em] text-stone-500 mb-2">División</label>
                            <select name="division" class="w-full bg-stone-900/40 border border-stone-800 p-3 text-white focus:outline-none focus:border-[#bf953f] transition-all uppercase cursor-pointer">
                                <option value="Logística">Logística</option>
                                <option value="Combate">Combate</option>
                                <option value="Exploración">Exploración</option>
                            </select>
                        </div>

                        <button type="submit" id="btnUplink" class="w-full gold-gradient text-black font-bold py-4 uppercase tracking-[0.2em] hover:opacity-90 transition-all duration-300 mt-4 relative overflow-hidden group">
                            Iniciar Uplink
                        </button>
                    </form>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div class="border border-stone-800 bg-black/20 backdrop-blur-sm min-h-[600px] flex flex-col relative">
                    <div id="roster-list-container" class="flex-1 overflow-y-auto">
                        <table class="w-full text-left border-collapse">
                            <tbody id="member-roster">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzULoU6VwGmC6EMc441bk6Yromj7__81nFTO8xJH1Dl8DcKiOqeQyoDhyU4r-o-Z0bP/exec';
        
        const form = document.getElementById('registroForm');
        const btn = document.getElementById('btnUplink');

        form.addEventListener('submit', e => {
            e.preventDefault(); // Evita descargas y recargas
            
            btn.innerText = "ESTABLECIENDO ENLACE...";
            btn.disabled = true;

            const formData = new FormData(form);

            // Envío a Google Sheets
            fetch(SCRIPT_URL, { method: 'POST', body: formData })
                .then(response => {
                    alert("¡TRANSMISIÓN COMPLETADA! Datos guardados en el Sindicato.");
                    
                    // Aquí llamamos a tu lógica original para pintar la fila en la tabla
                    const nuevoMiembro = {
                        discord: formData.get('discord'),
                        handle: formData.get('handle'),
                        division: formData.get('division'),
                        roles: ["RECLUTA"], // Valor por defecto
                        favShip: "PENDIENTE"
                    };
                    
                    // Reutilizamos tu función de renderizado (ajustada a tus IDs)
                    renderNewRow(nuevoMiembro);
                    
                    form.reset();
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    alert("ERROR: No se pudo contactar con la base de datos.");
                })
                .finally(() => {
                    btn.innerText = "INICIAR UPLINK";
                    btn.disabled = false;
                });
        });

        // Esta es tu función original de renderizado que saqué de tu snippet
        function renderNewRow(m) {
            const table = document.getElementById('member-roster');
            const row = `
                <tr class="border-b border-stone-900/50 hover:bg-stone-900/20 transition-colors group">
                    <td class="p-4 text-white font-bold uppercase text-xs tracking-wider">${m.discord}</td>
                    <td class="p-4 text-stone-400">@${m.handle}</td>
                    <td class="p-4 text-stone-500 text-[10px] uppercase tracking-wider">${m.division}</td>
                </tr>`;
            table.insertAdjacentHTML('afterbegin', row);
        }
    </script>
</body>
</html>
